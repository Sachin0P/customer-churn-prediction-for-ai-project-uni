# -*- coding: utf-8 -*-
"""ai project deploy.py

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1GV9srOdpbpXawC_c7LsN067RX3m0QPgu
"""


import streamlit as st
import joblib
import numpy as np

# ---- Load Model ----
@st.cache_resource
def load_model():
    model = joblib.load("customer_churn_random_forest.pkl")
    return model

model = load_model()

st.title("Customer Churn Prediction App")

st.write("Fill customer details to predict churn.")

# ---- INPUT FEATURES ----
# ⚠️ Replace these with EXACT features used during training
tenure = st.number_input("Tenure (months)", min_value=0, max_value=100, value=12)
monthly_charges = st.number_input("Monthly Charges", min_value=0.0, value=50.0)
total_charges = st.number_input("Total Charges", min_value=0.0, value=600.0)

# Convert to numpy array (shape must match training)
input_data = np.array([[tenure, monthly_charges, total_charges]])

# ---- Predict ----
if st.button("Predict"):
    prediction = model.predict(input_data)

    st.subheader("Prediction Result")

    if prediction[0] == 1:
        st.error("Customer is likely to CHURN")
    else:
        st.success("Customer is likely to STAY")

    # If classifier supports probability
    if hasattr(model, "predict_proba"):
        probability = model.predict_proba(input_data)
        confidence = np.max(probability) * 100
        st.write(f"Confidence: {confidence:.2f}%")
